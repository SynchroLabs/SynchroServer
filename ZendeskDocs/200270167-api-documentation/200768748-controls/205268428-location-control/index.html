
<html>
  <head>
    <meta charset='UTF-8'>
    <link rel='stylesheet' href='http://output.jsbin.com/gefofo.css' />
  </head>
  <body>
    <div id='container'>
    
      <h1>Location Control</h1>
      <p>The Location control is an invisible (non-layout) control, typically included at the top of a view definition. It accesses locations services and can update a bound value with location information, as well as invoke view model commands when the location is set or updated.</p>
<h3>Attributes:</h3>
<ul>
<li><code>movementThreshold</code> (in meters, to trigger location update, default is 100)</li>
</ul>
<h3>Bindings:</h3>
<ul>
<li><code>value</code></li>
<li><code>sync</code></li>
<li><code>onUpdate</code> (command + params)</li>
</ul>
<h3>Bound value output</h3>
<h4>Location Data</h4>
<pre>{
    available: true,
    status: "Active",
    coordinate:
    {
        latitude: 47.1234567,
        longitude: -122.123456
    },
    accuracy: 5,       // in meters
    heading: 45.1234,  // in degrees
    speed: 1.23        // in meters/second
}</pre>
<h4><code>status</code>:</h4>
<ul>
<li><code>DeterminingAvailabily</code> - The system is determining the availability of location services</li>
<li><code>Available</code> - Location services are available and a location update will be provided when available</li>
<li><code>NotAvailable</code> - Location services are not available, and no user action can make them available</li>
<li><code>PendingApproval</code> - Location service availability is pending response from the user for approval</li>
<li><code>NotApproved</code> - Access to location service has not been approved by the user for this application</li>
<li><code>Active</code> - A location has been provided, and future updates my occur based on<code>movementThreshold</code></li>
<li><code>Failed</code> - Location support is available, but the more recent attempt to determine location failed</li>
</ul>
<h4><code>available</code>:</h4>
<p>This value will be set to <code>true</code> if location services are available and approved, and your application should expect location updates. Typically this will mean that the status is one of <code>Available</code>, <code>Active</code>, or <code>Failed</code>. This member is provided as a convenience to avoid having to do more sophisticated analysis of <code>status</code>.</p>
<h3>Examples:</h3>
<p>Simple location control that updates local view model.</p>
<pre>{ control: "location", binding: "myLoc", movementThreshold: 500 }</pre>
<p>Location control that updates location in view model on server on every location change.</p>
<pre>{ control: "location", binding: { value: "myLoc", sync: "change" } }</pre>
<p>Location control that calls a command function on the server every time the location changes.</p>
<pre>{ control: "location", binding: { value: "myLoc", onUpdate: { command: "setPos", pos: "{myLoc.coordinate}" } }</pre>
<p>Location control and button that passes location via command when pressed. Button is shown only if location services are present, and enabled only if a location has been established.</p>
<pre>{ control: "location", binding: "myLoc" },
{ 
  control: "button", caption: "Use location", visibility: "{myLoc.available}", enabled: "{myLoc.coordinate}", 
  binding: { command: "doLocationSearch", location: "{myLoc.coordinate}" } 
}
</pre>
      
    </div>
  </body>
</html>
    
