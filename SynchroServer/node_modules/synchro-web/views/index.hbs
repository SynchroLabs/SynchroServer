<html>
  <head>
    <!-- JQuery -->
    <script src="//code.jquery.com/jquery-1.9.1.min.js"></script>
    <!-- Bootstrap -->
    <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap-theme.min.css"/>
    <script src="//netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>
    <!-- BootBox -->
    <script src="script/bootbox.min.js"></script>
    <!-- Synchro CSS -->
    <link rel="stylesheet" type="text/css" href="stylesheets/synchro.css">
  </head>
  <body>
    <!-- Bootstrap navbar with Synchro app title and back button -->
    <nav class="navbar navbar-inverse navbar-static-top" role="nagivation">
      <div class="container">
        <div class="navbar-header">
          <a id="synchro_title" class="navbar-brand"></a>
        </div>
        <ul class="nav navbar-nav navbar-right">
          <li>
            <p class="navbar-btn">
              <a id="synchro_back" style="visibility: hidden" href="#" class="btn btn-default">Back</a>
            </p>
          </li>
        </ul>
      </div>
    </nav>

    <div class="container">
      <!-- Main Synchro container -->
      <div id="synchro_container" class="synchro"></div>
    </div>

    <!-- User code to hook up page elements to Synchro -->
    <script type="text/javascript">
        function SynchroInit(synchro)
        {
            console.log("Synchro init called");

            var backButton = document.getElementById('synchro_back');
            if (backButton)
            {
                backButton.addEventListener("click", function(){ synchro.goBack() }, false);
            }

            var synchroApp =
            {
                endpoint: "{{endpoint}}", // required
                container: document.getElementById('synchro_container'), // required
                onSetPageTitle: function(title) // optional
                {
                    console.log("Page title set:", title);
                    document.getElementById('synchro_title').innerHTML = title;
                },
                onSetBackEnabled: function(isEnabled) // optional
                {
                    console.log("Back enabled:", isEnabled);
                    if (backButton)
                    {
                        backButton.style.visibility = isEnabled ? "visible" : "hidden";
                    }
                },
                onMessageBox: function(messageBox, execCommand) // optional
                {
                    messageBox.buttons = {};
                    if (messageBox.options)
                    {
                        messageBox.options.forEach(function(option, i)
                        {
                            messageBox.buttons["btn"+i] = { label: option.label, className: i == 0 ? "btn-primary" : "btn-default" };
                            if (option.command)
                            {
                                messageBox.buttons["btn"+i].callback = function(){ execCommand(option.command) };
                            }
                        });
                    }
                    else
                    {
                        messageBox.buttons["btn0"] = { label: "Close", className: "btn-primary" };
                    }
                    bootbox.dialog(messageBox);
                },
                // logConfig: {}, // optional, developer setting
            }

            return synchroApp;
        }        
    </script>

    <!-- The Synchro code -->
    <script src="script/synchro.js"></script>
  </body>
</html>
