var logger = require('log4js').getLogger("web-canvas-wrapper");

var WebControlWrapper = require('./web-control-wrapper');

var binding = require('../core/binding');
var CommandInstance = require('../core/command-instance');

var WebCanvasWrapper = function(parent, bindingContext, controlSpec)
{
    var self = this;

    this.base = WebControlWrapper;
    this.base(parent, bindingContext, controlSpec);
    logger.info("Canvas control created");

    this._control = document.createElement("div");
    this._control.classList.add("synchro-canvas");
    this._control.style.display = "inline-block";
    this._control.style.position="relative";

    if (controlSpec["contents"] != null)
    {
        this.createControls(controlSpec["contents"], function(childControlSpec, childControlWrapper)
        {
            logger.info("Created child control");

            childControlWrapper._control.style.position="absolute";

            childControlWrapper.processElementProperty(childControlSpec, "top", function(value)
            {
                childControlWrapper._control.style.top = self.toDeviceUnits(value);
            });
            childControlWrapper.processElementProperty(childControlSpec, "left", function(value)
            {
                childControlWrapper._control.style.left = self.toDeviceUnits(value);
            });

            self._control.appendChild(childControlWrapper._control);
        });
    }
}

WebCanvasWrapper.prototype = Object.create(WebControlWrapper.prototype);

module.exports = WebCanvasWrapper;
