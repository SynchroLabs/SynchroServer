// The Synchro Web Client server can be run directly (independent of the Synchro Server app instance)
// using this module, as follows:
//
//     node app.js
//
// This will fire up an express server (on port 3000) which will serve the Synchro Web client, talking
// to the Synchro Server instance configured below (in this case, localhost:1337/api).
//
var express = require('express');
var app = express();
var log4js = require('log4js');

var defaultLogConfig =
{ 
    // Redirect console.log to log4js, turn off color coding
    appenders:
    [ 
        { type: "console", layout: { type: "basic" } } 
    ],
    replaceConsole: true,
    levels: 
    {
        '[all]': 'WARN'
    }
};

log4js.configure(defaultLogConfig);

logger.info("Starting standalone Synchro web client server...");

var SynchroWeb = require('./index');
var synchroWeb = new SynchroWeb({}, "", "http://localhost:1337/api");

synchroWeb.addMiddleware(app);
synchroWeb.addRoutes(app);

app.listen(3000, function () 
{
    logger.info('SynchroWebClient server listening on port 3000!');
});
