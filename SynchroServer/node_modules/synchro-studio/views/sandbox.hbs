
{{#content "pageStyles" }}
<style type="text/css">
    #editorPanel {
    position: absolute;
    top: 0px;
    right: 0px;
    bottom: 0px;
    left: 260px;
    }
    #editor {
    position: absolute;
    top: 70px;
    right: 0px;
    bottom: 0px;
    left: 0px;
    }
    .debugging #editor {
    bottom: 210px;
    }
    #debuggerContext {
    position: absolute;
    height: 200px;
    right: 0px;
    bottom: -20px;
    left: 0px;
    display: none;
    }
    .debugging #debuggerContext {
    display: block;
    }
    .ace_gutter-cell.ace_breakpoint {
    border-radius: 20px 20px 20px 20px;
    box-shadow: 0px 0px 1px 1px red inset;
    }
    .active-breakpoint {
    background: rgba(255, 50, 50, 0.5);
    position: absolute;
    width: 100% !important;
    left: 0 !important;
    }
    button.debug {
    padding: 2px 8px 2px 2px;
    line-height: 26px;
    }
    button.debug:before {
    content: "";
    float: left;
    width: 32px;
    height: 24px;
    margin: 0 0 0 0;
    background:url(https://raw.githubusercontent.com/node-inspector/node-inspector/master/front-end/Images/statusbarButtonGlyphs.png) no-repeat;
    }
    button#start:before { background-position: -64px -48px; }
    button#stop:before { background-position: -256px 0px; }
    button#continue:before { background-position: -0px -72px; }
    button#stepin:before { background-position: -64px -72px; }
    button#stepout:before { background-position: -96px -72px; }
    button#stepover:before { background-position: -128px -72px; }

    div.debugging div.debug-notdebugging { display: none }
    div.notdebugging div.debug-debugging { display: none }
    button.debug-running:disabled:before { opacity: 0.40 }
</style>
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/toastr.js/2.0.1/css/toastr.min.css"/>
{{/content}}

{{#content "pageScripts" }}
<script src="//cdnjs.cloudflare.com/ajax/libs/toastr.js/2.0.1/js/toastr.min.js"></script>
<script src="../script/ace/ace.js" charset="utf-8"></script>
<script src="../script/sandbox.js"></script>
<script src="../script/ws-debug-client.js"></script>
{{/content}}

<div id="optionsPanel" style="position:absolute; top: 10px; bottom: 0px; width:250px; overflow: hidden;">
    <div class="panel panel-default" style="max-height: 100%; overflow-y: auto;">
        <!-- Default panel contents -->
        <div class="panel-heading clearfix">
            <b>Modules:</b>
            <a href="#" class="btn btn-primary btn-sm pull-right" role="button"><span class="glyphicon glyphicon-plus"></span> New</a>
        </div>
        <!-- List group -->
        <div id="modules" class="list-group">
            {{#each files}}
            <a href="#"  class="list-group-item" module="{{this}}" onClick="return onLoadModule('{{this}}');">{{this}}</a>
            {{/each}}
        </div>
    </div>
</div>

<div id="editorPanel" class="notdebugging">
    <nav class="navbar navbar-inverse" style="margin-top: 10px; padding-right: 5px; width:100%;" role="navigation">
        <a class="navbar-brand" href="/">Synchro API</a>
        <b class="navbar-text" id="module"></b>
        <button class="btn btn-default btn-sm navbar-btn" id="save" onClick="doSave();" style="display: inline;"><span class="glyphicon glyphicon-floppy-disk"></span> Save</button>
        {{#if loggedInUser}}
        <button class="btn btn-default navbar-btn navbar-right" id="logout" onClick='location.href="/logout";' style="display: inline; margin-left: 5px; padding: 5px;"><span class="glyphicon glyphicon glyphicon-log-out"></span> Log Out</button>
        {{/if}}
        <div class="btn-group navbar-right debug-notdebugging">
            <button class="btn btn-default navbar-btn debug" id="start" onClick='debugStart({{debugPort}});'>Start debugging</button>
        </div>
        <div class="btn-group navbar-right debug-debugging debug-notrunning">
            <button class="btn btn-default navbar-btn debug" id='stop' onClick='debugStop();'>Stop debugging</button>
            <button class="btn btn-default navbar-btn debug debug-running" id='continue' onClick='debugContinue();'>Continue</button>
            <button class="btn btn-default navbar-btn debug debug-running" id='stepin' onClick='debugStep("in");'>Step In</button>
            <button class="btn btn-default navbar-btn debug debug-running" id='stepout' onClick='debugStep("out");'>Step Out</button>
            <button class="btn btn-default navbar-btn debug debug-running" id='stepover' onClick='debugStep("next");'>Step Over</button>
        </div>

    </nav>
    <div id="editor"></div>

    <div id="debuggerContext" class="panel panel-default" style="overflow: auto;">
        <div class="panel-heading">
        <ul class="nav nav-pills" id="debuggerTabsNav">
            <li class="active"><a href="#stack">Call Stack</a></li>
            <li><a href="#arguments">Arguments</a></li>
            <li><a href="#locals">Locals</a></li>
            <li><a href="#watches">Watches</a></li>
            <li><a href="#console">Console</a></li>
        </ul>
        </div>
        <!-- Content -->
        <div class="tab-content">
            <div class="tab-pane active" id="stack">
                <table class="table ">
                    <thead>
                    <tr>
                        <th style="width: 1%;">&nbsp;</th>
                        <th>Call</th>
                    </tr>
                    </thead>
                    <tbody id="stackTable">
                    </tbody>
                </table>                
            </div>
            <div class="tab-pane" id="arguments">
                <table class="table ">
                    <thead>
                    <tr>
                        <th>Argument Name</th>
                        <th>Value</th>
                    </tr>
                    </thead>
                    <tbody id="argumentsTable">
                    </tbody>
                </table>                
            </div>
            <div class="tab-pane" id="locals">
                <table class="table ">
                    <thead>
                    <tr>
                        <th>Local Name</th>
                        <th>Value</th>
                    </tr>
                    </thead>
                    <tbody id="localsTable">
                    </tbody>
                </table>                
            </div>
            <div class="tab-pane" id="watches">
                <table class="table ">
                    <thead>
                    <tr>
                        <th>Watch Name</th>
                        <th>Value</th>
                    </tr>
                    </thead>
                    <tbody id="watchesTable">
                    <tr>
                        <td>viewModel</td>
                        <td>{ foo: "bar" }</td>
                    </tr>
                    <tr>
                        <td>test</td>
                        <td>13</td>
                    </tr>
                    </tbody>
                </table>                
            </div>
            <div class="tab-pane" id="console">Console</div>
        </div>
    </div>
</div>

<script>
    $('#save').hide();
    $('#debuggerTabsNav a').click(function (e) {
        e.preventDefault()
        $(this).tab('show')
    });
    initEditPage("{{modulePathPrefix}}", "{{page}}");
</script>
